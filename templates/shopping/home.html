{% extends "base.html" %}

{% block page %}
<style type="text/css">
	#pageContainer{
		margin: 60px auto;
	}
	#pageMessage{
		margin: 60px auto;
	}
</style>
<div class="container" id="pageMessage">
	<div class="alert alert-success" role="alert">
	  <h4 class="alert-heading">Welcome to the Shopping Section</h4>
	  <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
	  <hr>
	  <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
	</div>
</div><!-- Support Message -->

<div class="container" id="pageContainer">
	<div class="row">
		<div class="col-md-2">
			<h5>Category List</h5>
			<ul class="nav flex-column">
			  <li class="nav-item">
			    <a class="nav-link active" href="{% url 'category-products'  'mobiles' %}">Mobiles</a>
			  </li>
			  <li class="nav-item">
			    <a class="nav-link" href="{% url 'category-products'  'tablets' %}">Tablets</a>
			  </li>
			  <li class="nav-item">
			    <a class="nav-link" href="{% url 'category-products'  'desktops' %}">Desktops</a>
			  </li>
			  <li class="nav-item">
			    <a class="nav-link disabled" href="#">Disabled</a>
			  </li>
			</ul>
		</div><!-- /Category List -->

		<!-- ProductsList -->
		<div class="col-md-10">
			{% if products %}
					<div class="container">
						<div class="row" style="">
							{% for product in products %}
							<div class="col-xs-sm-3" style="margin: 20px 20px 20px 10px;">
								<div class="card" style="width: 15rem;">
								  {% if not product.productimage_set.last %}
								  	<img class="card-img-top" src="{{MEDIA_URL}}images/no_image.jpg" alt="" width="100">
								  {% else %}
								  	<img class="card-img-top" src="{{product.productimage_set.last.url}}" alt="Card image cap" width="70%">
								  {% endif %}
								  <div class="card-body">
								    <a href="{{product.productUrl}}"><p class="card-title">{{product.title}}</p></a>
								    <p class="card-text">{{prduct.sellingPrice}}</p>
								    <a href="{{product.productUrl}}" class="btn btn-primary">Buy Now</a>
								    <a href="#" class="btn btn-warning">Track Price</a>
								  </div>
								</div>
								<div class="card-body">
									{% for price in product.pricehistory_set.all %}
										<div class="card" style="border:none;">
											<div class="card-body">
												<p class="card-title">Rs. {{price.specialPrice}}{{price.date}}</p>
											</div>
										</div>
									{% endfor %}
								</div><!-- Chart Div for Each Product Instance -->
							</div><!-- Product Div -->
							<!-- <div class="col-xs-sm-1"></div> -->
							{% if forloop.counter|divisibleby:3 %}
								<div class="clearfix">
									
								</div>
							{% endif %}
							{% endfor %}
						</div><!-- Row -->
					</div><!-- Card -->
					<div class="clear-fix"></div>
			{% else %}
				<h5>No products Available</h5>
			{% endif %}
		</div><!-- ProductsList -->
		{% if is_paginated %}
		  <ul class="pagination" style="text-align: center;">
		    {% if page_obj.has_previous %}
		      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous Page&laquo;</a></li>
		    {% else %}
		      <li class="disabled page-item"><span class="page-link">Prev Page&laquo;</span></li>
		    {% endif %}
		    {% for i in paginator.page_range %}
		      {% if page_obj.number == i %}
		        <li class="active page-item"><span class="page-link">{{ i }} <span class="sr-only">(current)</span></span></li>
		      {% else %}
		        <!-- <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li> -->
		      {% endif %}
		    {% endfor %}
		    {% if page_obj.has_next %}
		      <li class="page-item"><a class="page-link btn btn-primary" href="?page={{ page_obj.next_page_number }}">Next Page&raquo;</a></li>
		    {% else %}
		      <li class="disabled page-item"><span class="page-link">Next Page&raquo;</span></li>
		    {% endif %}
		  </ul>
		{% endif %}
	</div><!-- /Row -->
</div><!-- /Page Container -->
{% endblock page %}