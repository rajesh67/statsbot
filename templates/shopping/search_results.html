{% extends "base.html" %}
{% load static %}

{% block page %}
<style type="text/css">
	#pageContainer{
		margin: 60px auto;
	}
	#pageMessage{
		margin: 60px auto;
	}
</style>


<!-- New Template Design -->
<div class="container" id="pageContainer">
	{% for store, productsList in data.items %}
		<div class="card" style="border: none;">
			<div class="card-header" style="border: none; text-transform: uppercase; background-color: #e0eafe66;">
				<h5>{{store.short_name}} Search Results : Showing total {{productsList|length}} products for "{{ request.GET.q }}"</h5>
			</div><!-- /header -->

		</div><!-- Store Results Card -->
		{% if productsList %}
			<!--Carousel Wrapper-->
			<div id="multi-item-example-{{store.short_name}}" class="carousel slide carousel-multi-item" data-ride="carousel">
			    <!--Indicators-->
			    <!-- <ol class="carousel-indicators">
			        <li data-target="#multi-item-example" data-slide-to="0" class="active"></li>
			        <li data-target="#multi-item-example" data-slide-to="1"></li>
			        <li data-target="#multi-item-example" data-slide-to="2"></li>
			    </ol> -->
			    <!--/.Indicators-->

			    <!--Slides-->
			    <div class="carousel-inner" role="listbox" style="padding-bottom: -100px; height: 32rem;">

			        <!--Third slide-->
			        	<!-- Product Div -->
			        	{% for product in productsList %}
			        	
			        	{% if forloop.first %}<div class="carousel-item active">{% endif %}
				        	
				            <div class="col-md-3">
				                <div class="card mb-2">
				                    <div class="card-header" style="border:none;">
									    <p class=""><img src="{{MEDIA_URL}}{{product.store.logo_image}}" class="img-fluid" style="overflow:hidden; width: 60%; float: center; top:10; position: relative;"></p>
									  </div><!-- /Card header -->
				                    <img class="img-fluid" src="{{product.get_default_image.url}}" alt="Card image cap" style="overflow: hidden; display: block; height: 250px;">
				                    <div class="card-body">
				                        <h4 class="card-title" style="font-size: 0.9em; text-transform: uppercase;">{{product.title|truncatechars:100}}</h4>
				                        <p class="card-text" style="font-size: 0.8em;">
				                        	<h5 style="font-size: 0.8em;">Price : INR {{product.prices.last.sellingPrice}}</h5>
				                        </p>
				                        <a class="btn btn-warning btn-block" href="{{product.productUrl}}" style="text-align: bottom;">Buy Now</a>
				                    </div>
				                </div>
				            </div><!-- /Product Div -->

				            {% if forloop.last %}
				            <div class="col-sm-3 text-center" style="vertical-align: center;">
				            	<a class="btn-floating btn-md btn btn-block btn-primary" href="#" style="vertical-align: center; margin-top: 20%;">Browse ALL Products<i class="fa fa-chevron-right" style="margin-left: 10px;"></i><i class="fa fa-chevron-right"></i></a>	
				            </div>
				            {% endif %}

			            {% if forloop.counter|divisibleby:4 %}</div><div class="carousel-item">{% endif %}

			            {% if forloop.last %}</div>{% endif %}
			        <!--/.Third slide-->
			        {% endfor %}
			    </div>
			    <!--/.Slides-->


			    <!--Controls-->
			    <div class="controls-bottom" style="text-align: center;">
			        <a class="btn-floating btn btn-md btn-primary" href="#multi-item-example-{{store.short_name}}" data-slide="prev"><i class="fa fa-chevron-left"></i>Previous</a>
			        <a class="btn-floating btn-md btn btn-primary" href="#multi-item-example-{{store.short_name}}" data-slide="next"><i class="fa fa-chevron-right"></i>Next</a>
			    </div>
			    <!--/.Controls-->

			</div>
			<!--/.Carousel Wrapper-->
		{% else %}
			<h5>No Products Available On this Store</h5>
		{% endif %}
	{% endfor %}
</div><!-- Page container -->
{% endblock page %}