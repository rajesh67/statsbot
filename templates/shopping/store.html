{% extends "base.html" %}
{% load static %}
{% block page %}
<style type="text/css">
	#pageContainer{
		margin: 60px auto;
	}
	#pageMessage{
		margin: 60px auto;
	}
</style>
<div class="container" id="pageMessage">
	<div class="card" style="border:none;">
		<!-- <div class="card-header">
			
		</div> --><!-- /Store Name -->
		<div class="card-body">
			<div class="storeImage" style="width: 20%; float: left">
				<img src="{{MEDIA_URL}}{{store.logo_image}}" style="width:100%; height:100px; overflow:hidden;">
			</div>
			<div class="storeTitleDescription" style="width: 50%; float: left">
				<h4>{{store.name}}</h4>
				<h5><small>{{store.short_name}}</small></h5>
				<p>{{store.description}}</p>
			</div>

			<div class="storeDeals" style="width: 30%; float: left;">
				<div class="storeLink" style="margin: 10px 10px;">
					<a target="_blank" class="btn btn-warning btn-block" href="{{store.home_url}}" style="text-transform: uppercase;">Shop On {{ store.name }}</a>
				</div>
			</div>
		</div><!-- /Store Description -->
		<!-- <div class="card-footer">
			
		</div> --><!-- /Store Products Found -->
	</div><!-- Store Details Card -->
</div><!-- Support Message -->

<div class="container" id="pageContainer">     
	<div class="row">         
		<div class="col-md-2">             
			<h5>Available Catgories</h5>             
		<ul class="nav flex-column">     
			{% for category in store.category_set.all %}
				<li class="nav-item">
					<a href="{% url 'store-category' store.short_name category.name %}" class="nav-item" style="text-transform: uppercase; text-decoration: none;">{{category.name}}</a>
				</li>
			{% endfor %}
		</ul>         
</div><!-- /Category List -->

		<!-- ProductsList -->
		<div class="col-md-10">
			{% if products %}
					<div class="container">
						<div class="row" style="">
							{% for product in products %}
							<div class="col-xs-sm-3" style="margin: 20px 20px 20px 10px;">
								<div class="card" style="width: 15rem; border:none;">
								  {% if product.productimage_set.last %}
								  <img class="card-img-top" src="{{product.productimage_set.last.url}}" alt="Card image cap" width="70%" style="width: 90%; height: 200px; overflow: hidden; margin: auto auto; display: block;">
								  {% else %}
								  <img class="card-img-top" src="{{product.searchproductimage_set.last.url}}" alt="Card image cap" width="70%" style="width: 90%; height: 200px; overflow: hidden; margin: auto auto; display: block;">
								  {% endif %}
								  <div class="card-body">
								    <a href="{{product.productUrl}}"><p class="card-title">{{product.title}}</p></a>
								    <p class="card-text">{{prduct.sellingPrice}}</p>
								    <a href="{{product.productUrl}}" class="btn btn-primary">Buy Now</a>
								    <a href="#" class="btn btn-warning">Track Price</a>
								  </div>
								</div>
								<div class="card-body">
									{% for price in product.pricehistory_set.all %}
										<div class="card" style="border:none;">
											<div class="card-body">
												<p class="card-title">Rs. {{price.specialPrice}}{{price.date}}</p>
											</div>
										</div>
									{% endfor %}
								</div><!-- Chart Div for Each Product Instance -->
							</div><!-- Product Div -->
							<!-- <div class="col-xs-sm-1"></div> -->
							{% if forloop.counter|divisibleby:3 %}
								<div class="clearfix">
									
								</div>
							{% endif %}
							{% endfor %}
						</div><!-- Row -->
					</div><!-- Card -->
					<div class="clear-fix"></div>
			{% else %}
				<h5>No products Available</h5>
			{% endif %}
		</div><!-- ProductsList -->
		{% if is_paginated %}
		  <ul class="pagination" style="text-align: center;">
		    {% if page_obj.has_previous %}
		      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous Page&laquo;</a></li>
		    {% else %}
		      <li class="disabled page-item"><span class="page-link">Prev Page&laquo;</span></li>
		    {% endif %}
		    {% for i in paginator.page_range %}
		      {% if page_obj.number == i %}
		        <li class="active page-item"><span class="page-link">{{ i }} <span class="sr-only">(current)</span></span></li>
		      {% else %}
		        <!-- <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li> -->
		      {% endif %}
		    {% endfor %}
		    {% if page_obj.has_next %}
		      <li class="page-item"><a class="page-link btn btn-primary" href="?page={{ page_obj.next_page_number }}">Next Page&raquo;</a></li>
		    {% else %}
		      <li class="disabled page-item"><span class="page-link">Next Page&raquo;</span></li>
		    {% endif %}
		  </ul>
		{% endif %}
	</div><!-- /Row -->
</div><!-- /Page Container -->
{% endblock page %}